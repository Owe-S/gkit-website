# Phase 3 Architecture Diagram

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ADMIN CMS INTERFACE                      â”‚
â”‚                    (React + Firebase)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Form Field Mappers    â”‚
        â”‚  (Smart Type Detection) â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                                      â”‚
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—    â”‚
    â•‘            PHASE 3 COMPONENTS                      â•‘    â”‚
    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£    â”‚
    â•‘                                                   â•‘    â”‚
    â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘    â”‚
    â•‘  â”‚ RichTextEditor                           â”‚   â•‘    â”‚
    â•‘  â”‚ â”œâ”€ Markdown formatting toolbar           â”‚   â•‘    â”‚
    â•‘  â”‚ â”œâ”€ Bold, Italic, Code support           â”‚   â•‘    â”‚
    â•‘  â”‚ â”œâ”€ H1, H2, H3 headers                    â”‚   â•‘    â”‚
    â•‘  â”‚ â”œâ”€ Bullet list support                   â”‚   â•‘    â”‚
    â•‘  â”‚ â”œâ”€ Live preview toggle                   â”‚   â•‘    â”‚
    â•‘  â”‚ â””â”€ Syntax highlighting                   â”‚   â•‘    â”‚
    â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘    â”‚
    â•‘                                                   â•‘    â”‚
    â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘    â”‚
    â•‘  â”‚ CategoryDropdown                         â”‚   â•‘    â”‚
    â•‘  â”‚ â”œâ”€ Pre-configured categories             â”‚   â•‘    â”‚
    â•‘  â”‚ â”‚  â”œâ”€ Produkter                          â”‚   â•‘    â”‚
    â•‘  â”‚ â”‚  â”œâ”€ Apps                               â”‚   â•‘    â”‚
    â•‘  â”‚ â”‚  â”œâ”€ Integrasjoner                      â”‚   â•‘    â”‚
    â•‘  â”‚ â”‚  â””â”€ VerktÃ¸y                            â”‚   â•‘    â”‚
    â•‘  â”‚ â””â”€ Customizable per field                â”‚   â•‘    â”‚
    â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘    â”‚
    â•‘                                                   â•‘    â”‚
    â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘    â”‚
    â•‘  â”‚ Auto-Managed Timestamps                  â”‚   â•‘    â”‚
    â•‘  â”‚ â”œâ”€ updatedAt auto-set on save           â”‚   â•‘    â”‚
    â•‘  â”‚ â”œâ”€ Read-only display                     â”‚   â•‘    â”‚
    â•‘  â”‚ â””â”€ Lock indicator (ğŸ”’ Auto-set)         â”‚   â•‘    â”‚
    â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘    â”‚
    â•‘                                                   â•‘    â”‚
    â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘    â”‚
    â•‘  â”‚ Smart Field Validators                   â”‚   â•‘    â”‚
    â•‘  â”‚ â”œâ”€ URL validation                        â”‚   â•‘    â”‚
    â•‘  â”‚ â”‚  â”œâ”€ Clickable preview (ğŸ”—)            â”‚   â•‘    â”‚
    â•‘  â”‚ â”‚  â””â”€ Opens in new tab                   â”‚   â•‘    â”‚
    â•‘  â”‚ â”œâ”€ Slug auto-formatting                  â”‚   â•‘    â”‚
    â•‘  â”‚ â”‚  â”œâ”€ Converts to lowercase              â”‚   â•‘    â”‚
    â•‘  â”‚ â”‚  â””â”€ Replaces chars with hyphens        â”‚   â•‘    â”‚
    â•‘  â”‚ â””â”€ Image preview display                 â”‚   â•‘    â”‚
    â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘    â”‚
    â•‘                                                   â•‘    â”‚
    â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘    â”‚
    â•‘  â”‚ Integrated Components (Phase 1-2)        â”‚   â•‘    â”‚
    â•‘  â”‚ â”œâ”€ ArrayEditor (features lists)          â”‚   â•‘    â”‚
    â•‘  â”‚ â”œâ”€ IconPicker (icon selection)           â”‚   â•‘    â”‚
    â•‘  â”‚ â”œâ”€ Toggle Switches (boolean)             â”‚   â•‘    â”‚
    â•‘  â”‚ â””â”€ Number Spinners (numeric)             â”‚   â•‘    â”‚
    â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘    â”‚
    â•‘                                                   â•‘    â”‚
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚     Form Data Processing        â”‚
        â”‚  (handleInputChange handler)    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Save Handler (handleSave)      â”‚
        â”‚  â”œâ”€ Auto-set updatedAt: now()  â”‚
        â”‚  â”œâ”€ Validate data              â”‚
        â”‚  â””â”€ Send to Firestore          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    Firebase Firestore DB           â”‚
        â”‚  â”œâ”€ products collection            â”‚
        â”‚  â”œâ”€ apps collection                â”‚
        â”‚  â”œâ”€ integrations collection        â”‚
        â”‚  â””â”€ blog collection                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagram

```
User Action                  Component        Handler           Database
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Click document        â†’   Admin.tsx        handleSelectDoc   â”€
                            (list view)                          â”‚
                                                                 â”‚
2. Edit field value      â†’   RichTextEditor   handleInputChange â”‚
                            (or other editor)                    â”‚
                                                                 â”‚
3. Click "Save"          â†’   Admin.tsx        handleSave()      â†’ Firestore
                            (update data)                        â”‚
                                                                 â”‚
                            â†“                                    â†“
                            Auto-set                            Document
                            updatedAt:                          updated
                            new Date()                          with new
                                                                timestamp
                                                                â”‚
4. Reload              â†    Admin.tsx        loadCollections   â† Firestore
                            (refresh UI)
```

## Field Type Mapping

```
Form Field Type          â†’  Editor Component          â†’  Firestore Type
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
string (short)           â†’  Text Input                â†’  string
string (> 100 chars)     â†’  RichTextEditor (Phase 3) â†’  string
string (details/desc)    â†’  RichTextEditor (Phase 3) â†’  string
string (category)        â†’  CategoryDropdown (Phase 3)â†’  string
string (icon)            â†’  IconPicker               â†’  string
string (imageUrl)        â†’  Image Input + Preview    â†’  string
string (url)             â†’  URL Validator (Phase 3)  â†’  string
string (slug)            â†’  Slug Formatter (Phase 3) â†’  string

number                   â†’  Number Input + Spinner   â†’  number
boolean                  â†’  Toggle Switch            â†’  boolean
array of objects         â†’  ArrayEditor              â†’  array
object                   â†’  JSON Editor              â†’  object

timestamp (updatedAt)    â†’  Read-only Display (P3)   â†’  Timestamp
```

## Component Dependency Tree

```
Admin.tsx
â”œâ”€â”€ Firebase Auth
â”‚   â””â”€â”€ getAuth()
â”œâ”€â”€ Firebase Firestore
â”‚   â””â”€â”€ getFirestore()
â”‚
â”œâ”€â”€ Phase 3 Components
â”‚   â”œâ”€â”€ RichTextEditor.tsx
â”‚   â”‚   â””â”€â”€ RichTextEditor.css
â”‚   â””â”€â”€ CategoryDropdown.tsx
â”‚       â””â”€â”€ CategoryDropdown.css
â”‚
â”œâ”€â”€ Phase 1-2 Components
â”‚   â”œâ”€â”€ ArrayEditor.tsx
â”‚   â”œâ”€â”€ IconPicker.tsx
â”‚   â”œâ”€â”€ and others...
â”‚
â””â”€â”€ Admin.css (main styling)
```

## Field Layout in Phase 3

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FORM FIELD LAYOUT                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  Regular Fields (Compact)       Full-Width (Phase 3)â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ id (read-only)          â”‚   â”‚ features        â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚ [Array Editor]  â”‚â”‚
â”‚  â”‚ name                     â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ category (dropdown) âœ¨P3 â”‚   â”‚ details         â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚ [Rich Text] âœ¨P3â”‚â”‚
â”‚  â”‚ icon                     â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ price                    â”‚   â”‚ description     â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚ [Rich Text] âœ¨P3â”‚â”‚
â”‚  â”‚ url (validator) âœ¨P3     â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
â”‚  â”‚ slug (auto-format) âœ¨P3  â”‚   Auto Fields (Phase 3)
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ updatedAt (read-only) âœ¨ â”‚   â”‚ updatedAt       â”‚â”‚
â”‚  â”‚ ğŸ”’ Auto-set             â”‚   â”‚ [2024-01-15...] â”‚â”‚
â”‚  â”‚                          â”‚   â”‚ ğŸ”’ Auto-set    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                      â”‚
â”‚  [Cancel] [Delete] [Save]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend: âœ¨ = Phase 3 Enhancement
        ğŸ”’ = Auto-managed field
```

## Processing Flow

```
handleSave()
â”‚
â”œâ”€ Disable save button
â”‚
â”œâ”€ Extract document data
â”‚   â””â”€ Remove 'id' field
â”‚
â”œâ”€ AUTO-MANAGE TIMESTAMP (Phase 3)
â”‚   â””â”€ Set updatedAt: new Date()
â”‚
â”œâ”€ Validate field types (auto-format)
â”‚   â”œâ”€ slugs â†’ lowercase-with-hyphens
â”‚   â”œâ”€ urls â†’ validate format
â”‚   â””â”€ other â†’ pass through
â”‚
â”œâ”€ Call Firebase updateDoc()
â”‚   â””â”€ db.collection(activeCollection).doc(id).update(data)
â”‚
â”œâ”€ On Success
â”‚   â”œâ”€ Reload collections
â”‚   â”œâ”€ Clear selection
â”‚   â””â”€ Show success
â”‚
â”œâ”€ On Error
â”‚   â””â”€ Display error message
â”‚
â””â”€ Re-enable save button
```

## Performance Metrics

```
Component Sizes (Gzipped)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
RichTextEditor.tsx       ~2-3 KB
CategoryDropdown.tsx     ~1-2 KB
Admin.tsx               ~50-60 KB (entire form)
Admin.css               ~10-15 KB

Build Metrics
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Build Time:     ~5 seconds
Bundle Size:    939.35 kB
Gzip Size:      244.05 kB
Modules:        137 transformed
Status:         âœ… Production Ready
```

---

**Phase 3 Architecture v1.0.0**  
**Status: Complete & Production Ready**
